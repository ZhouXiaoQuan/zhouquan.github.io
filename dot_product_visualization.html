<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‚¹ç§¯ç›¸ä¼¼åº¦å¯è§†åŒ–è¯¦è§£</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #9b59b6;
            padding-bottom: 15px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            border-left: 5px solid #9b59b6;
            padding-left: 15px;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .graph-container {
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        .explanation {
            background: #f3e5f5;
            padding: 15px;
            border-left: 4px solid #9b59b6;
            margin: 15px 0;
            border-radius: 4px;
        }
        .formula {
            background: #fff3cd;
            padding: 20px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-radius: 4px;
            font-size: 16px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .highlight {
            color: #9b59b6;
            font-weight: bold;
        }
        .highlight-red {
            color: #e74c3c;
            font-weight: bold;
        }
        .highlight-green {
            color: #27ae60;
            font-weight: bold;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .comparison-table th {
            background-color: #9b59b6;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .step-number {
            display: inline-block;
            background: #9b59b6;
            color: white;
            width: 30px;
            height: 30px;
            line-height: 30px;
            border-radius: 50%;
            text-align: center;
            margin-right: 10px;
        }
        .info-box {
            background: #f3e5f5;
            border: 1px solid #e1bee7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .success-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .math-box {
            background: white;
            border: 2px solid #9b59b6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .three-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .column-box {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        .column-box h4 {
            margin-top: 0;
            color: #9b59b6;
        }
        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .zero { color: #f39c12; }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ ç‚¹ç§¯ç›¸ä¼¼åº¦ï¼ˆDot Productï¼‰å®Œæ•´å¯è§†åŒ–</h1>

        <div class="info-box">
            <strong>ğŸ“Œ å­¦ä¹ ç›®æ ‡ï¼š</strong> æ·±å…¥ç†è§£ç‚¹ç§¯çš„è®¡ç®—åŸç†ã€å‡ ä½•æ„ä¹‰ï¼Œä»¥åŠå®ƒå¦‚ä½•åŒæ—¶è€ƒè™‘å‘é‡çš„æ–¹å‘å’Œé•¿åº¦ã€‚
        </div>

        <!-- Section 1: ç‚¹ç§¯çš„åŸºæœ¬æ¦‚å¿µ -->
        <h2><span class="step-number">1</span>ç‚¹ç§¯çš„åŸºæœ¬æ¦‚å¿µ</h2>
        <div class="section">
            <div class="math-box">
                <h3 style="color: #9b59b6; margin-top: 0;">æ•°å­¦å®šä¹‰</h3>
                <div class="formula">
                    <strong>ä»£æ•°å®šä¹‰ï¼š</strong><br>
                    dot_product(A, B) = Î£(Aáµ¢ Ã— Báµ¢)<br><br>

                    å±•å¼€å½¢å¼ï¼š<br>
                    A Â· B = Aâ‚€Ã—Bâ‚€ + Aâ‚Ã—Bâ‚ + Aâ‚‚Ã—Bâ‚‚ + ... + Aâ‚‡â‚†â‚‡Ã—Bâ‚‡â‚†â‚‡<br><br>

                    <strong>å‡ ä½•å®šä¹‰ï¼š</strong><br>
                    A Â· B = ||A|| Ã— ||B|| Ã— cos(Î¸)<br><br>

                    å…¶ä¸­ï¼š<br>
                    â€¢ ||A|| = å‘é‡ A çš„é•¿åº¦ï¼ˆæ¨¡é•¿ï¼‰<br>
                    â€¢ ||B|| = å‘é‡ B çš„é•¿åº¦ï¼ˆæ¨¡é•¿ï¼‰<br>
                    â€¢ Î¸ = å‘é‡ A å’Œ B ä¹‹é—´çš„å¤¹è§’
                </div>
            </div>

            <div class="explanation">
                <strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong>
                <ul>
                    <li>ç‚¹ç§¯ = <span class="highlight">æ–¹å‘</span> Ã— <span class="highlight">é•¿åº¦</span> çš„ç»¼åˆåº¦é‡</li>
                    <li>å€¼åŸŸï¼š<strong>(-âˆ, +âˆ)</strong>ï¼Œå¯æ­£å¯è´Ÿå¯ä¸ºé›¶</li>
                    <li>è®¡ç®—æ•ˆç‡æœ€é«˜ï¼ˆåªéœ€ä¹˜åŠ è¿ç®—ï¼Œæ— éœ€å¼€æ–¹ï¼‰</li>
                    <li>æ­£å€¼ â†’ æ–¹å‘ç›¸è¿‘ï¼›è´Ÿå€¼ â†’ æ–¹å‘ç›¸åï¼›é›¶ â†’ å‚ç›´</li>
                </ul>
            </div>

            <div class="three-column">
                <div class="column-box" style="border-color: #27ae60;">
                    <h4 class="positive">ç‚¹ç§¯ > 0</h4>
                    <p>å‘é‡æ–¹å‘ç›¸è¿‘<br>ï¼ˆå¤¹è§’ < 90Â°ï¼‰</p>
                    <strong>ç›¸ä¼¼</strong>
                </div>
                <div class="column-box" style="border-color: #f39c12;">
                    <h4 class="zero">ç‚¹ç§¯ = 0</h4>
                    <p>å‘é‡æ­£äº¤<br>ï¼ˆå¤¹è§’ = 90Â°ï¼‰</p>
                    <strong>æ— å…³</strong>
                </div>
                <div class="column-box" style="border-color: #e74c3c;">
                    <h4 class="negative">ç‚¹ç§¯ < 0</h4>
                    <p>å‘é‡æ–¹å‘ç›¸å<br>ï¼ˆå¤¹è§’ > 90Â°ï¼‰</p>
                    <strong>ç›¸å</strong>
                </div>
            </div>
        </div>

        <!-- Section 2: 2D ç©ºé—´ä¸­çš„ç‚¹ç§¯ -->
        <h2><span class="step-number">2</span>2D ç©ºé—´å‡ ä½•ç†è§£</h2>
        <div class="section">
            <div class="explanation">
                <strong>è¯´æ˜ï¼š</strong>ç‚¹ç§¯å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‘é‡åœ¨å¦ä¸€ä¸ªå‘é‡æ–¹å‘ä¸Šçš„<span class="highlight">æŠ•å½±é•¿åº¦</span>ä¹˜ä»¥è¯¥å‘é‡çš„é•¿åº¦
            </div>
            <div class="graph-container" id="plot2d"></div>
            <div class="math-box">
                <h3 style="color: #9b59b6; margin-top: 0;">2D ç¤ºä¾‹è®¡ç®—</h3>
                <div class="formula">
                    å‘é‡ A = (3, 4)  ||A|| = 5<br>
                    å‘é‡ B = (4, 3)  ||B|| = 5<br>
                    å‘é‡ C = (-3, 4) ||C|| = 5<br><br>

                    <strong class="positive">A Â· B = 3Ã—4 + 4Ã—3 = 12 + 12 = 24</strong> (æ­£å€¼ï¼Œæ–¹å‘ç›¸è¿‘)<br>
                    <strong class="zero">A Â· C = 3Ã—(-3) + 4Ã—4 = -9 + 16 = 7</strong> (æ­£å€¼ï¼Œå¤¹è§’å°äº90Â°)<br>
                    <strong class="negative">B Â· C = 4Ã—(-3) + 3Ã—4 = -12 + 12 = 0</strong> (é›¶ï¼Œæ­£äº¤ï¼)<br><br>

                    å‡ ä½•éªŒè¯ï¼š<br>
                    A Â· B = ||A|| Ã— ||B|| Ã— cos(Î¸)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 5 Ã— 5 Ã— cos(16.26Â°)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 25 Ã— 0.96<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â‰ˆ 24 âœ“
                </div>
            </div>
        </div>

        <!-- Section 3: ç‚¹ç§¯çš„å‡ ä½•æ„ä¹‰ - æŠ•å½± -->
        <h2><span class="step-number">3</span>ç‚¹ç§¯çš„å‡ ä½•æ„ä¹‰ï¼šæŠ•å½±</h2>
        <div class="section">
            <div class="graph-container" id="projection-plot"></div>
            <div class="explanation">
                <strong>æŠ•å½±å…¬å¼ï¼š</strong><br>
                A Â· B = ||A|| Ã— (B åœ¨ A æ–¹å‘ä¸Šçš„æŠ•å½±é•¿åº¦)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= ||B|| Ã— (A åœ¨ B æ–¹å‘ä¸Šçš„æŠ•å½±é•¿åº¦)<br><br>
                <strong>ç†è§£ï¼š</strong>ç‚¹ç§¯è¡¡é‡çš„æ˜¯ä¸¤ä¸ªå‘é‡åœ¨åŒä¸€æ–¹å‘ä¸Šçš„"é‡åˆç¨‹åº¦"
            </div>
        </div>

        <!-- Section 4: 3D ç©ºé—´å¯è§†åŒ– -->
        <h2><span class="step-number">4</span>3D ç©ºé—´ç‚¹ç§¯å¯è§†åŒ–</h2>
        <div class="section">
            <div class="graph-container" id="plot3d"></div>
            <div class="math-box">
                <h3 style="color: #9b59b6; margin-top: 0;">3D ç¤ºä¾‹è®¡ç®—</h3>
                <div class="formula">
                    å‘é‡ A = (1, 2, 3)<br>
                    å‘é‡ B = (4, 5, 6)<br><br>

                    A Â· B = 1Ã—4 + 2Ã—5 + 3Ã—6<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 4 + 10 + 18<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="highlight">32</span>
                </div>
            </div>
        </div>

        <!-- Section 5: 768 ç»´å‘é‡çš„è¯¦ç»†è®¡ç®— -->
        <h2><span class="step-number">5</span>768 ç»´å‘é‡çš„ç‚¹ç§¯è®¡ç®—</h2>
        <div class="section">
            <div class="explanation">
                ä»¥ GTE æ¨¡å‹ç”Ÿæˆçš„ 768 ç»´å‘é‡ä¸ºä¾‹ï¼Œå±•ç¤ºå‰ 5 ä¸ªç»´åº¦çš„è®¡ç®—è¿‡ç¨‹ï¼š
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ç»´åº¦ i</th>
                        <th>vec1[i]<br>(å¥å­1)</th>
                        <th>vec2[i]<br>(å¥å­2)</th>
                        <th>ä¹˜ç§¯<br>Aáµ¢ Ã— Báµ¢</th>
                        <th>ç´¯åŠ å’Œ</th>
                    </tr>
                </thead>
                <tbody id="calculation-table">
                </tbody>
            </table>

            <div class="formula">
                <strong>å®Œæ•´è®¡ç®—ï¼ˆ768 ç»´ï¼‰ï¼š</strong><br>
                <div id="full-calculation"></div>
            </div>
        </div>

        <!-- Section 6: Java ä»£ç å®ç° -->
        <h2><span class="step-number">6</span>Java ä»£ç å®ç°</h2>
        <div class="section">
            <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">
<span style="color: #75715e;">/**
 * è®¡ç®—ç‚¹ç§¯ï¼ˆå†…ç§¯ï¼‰
 *
 * @param vec1 å‘é‡1 (768ç»´)
 * @param vec2 å‘é‡2 (768ç»´)
 * @return ç‚¹ç§¯å€¼ (èŒƒå›´: (-âˆ, +âˆ))
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">dotProduct</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #f92672;">if</span> (vec1.length != vec2.length) {
        <span style="color: #f92672;">throw new</span> <span style="color: #a6e22e;">IllegalArgumentException</span>(<span style="color: #e6db74;">"å‘é‡ç»´åº¦ä¸åŒ¹é…"</span>);
    }

    <span style="color: #66d9ef;">double</span> result = <span style="color: #ae81ff;">0.0</span>;

    <span style="color: #75715e;">// éå†æ‰€æœ‰ç»´åº¦ï¼ˆ768ç»´ï¼‰- æœ€ç®€å•é«˜æ•ˆçš„è®¡ç®—</span>
    <span style="color: #f92672;">for</span> (<span style="color: #66d9ef;">int</span> i = <span style="color: #ae81ff;">0</span>; i &lt; vec1.length; i++) {
        result += vec1[i] * vec2[i];  <span style="color: #75715e;">// åªéœ€ä¹˜æ³•å’ŒåŠ æ³•</span>
    }

    <span style="color: #f92672;">return</span> result;
}

<span style="color: #75715e;">/**
 * ç‚¹ç§¯ä¸ä½™å¼¦ç›¸ä¼¼åº¦çš„å…³ç³»
 * cosine = dotProduct / (||A|| Ã— ||B||)
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">cosineSimilarityFromDotProduct</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #66d9ef;">double</span> dot = dotProduct(vec1, vec2);
    <span style="color: #66d9ef;">double</span> norm1 = Math.<span style="color: #a6e22e;">sqrt</span>(dotProduct(vec1, vec1));  <span style="color: #75715e;">// ||A|| = âˆš(AÂ·A)</span>
    <span style="color: #66d9ef;">double</span> norm2 = Math.<span style="color: #a6e22e;">sqrt</span>(dotProduct(vec2, vec2));  <span style="color: #75715e;">// ||B|| = âˆš(BÂ·B)</span>

    <span style="color: #f92672;">return</span> dot / (norm1 * norm2);
}

<span style="color: #75715e;">/**
 * å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼Œç‚¹ç§¯å°±ç­‰äºä½™å¼¦ç›¸ä¼¼åº¦
 * å› ä¸º ||A|| = ||B|| = 1
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">dotProductNormalized</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #75715e;">// å‡è®¾å‘é‡å·²ç»å½’ä¸€åŒ–</span>
    <span style="color: #75715e;">// æ­¤æ—¶ dot(A, B) = ||A|| Ã— ||B|| Ã— cos(Î¸) = 1 Ã— 1 Ã— cos(Î¸) = cos(Î¸)</span>
    <span style="color: #f92672;">return</span> dotProduct(vec1, vec2);
}

<span style="color: #75715e;">/**
 * ä½¿ç”¨ SIMD ä¼˜åŒ–çš„ç‚¹ç§¯ï¼ˆæ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬ï¼‰
 * å®é™…ç”Ÿäº§ä¸­å¯ä»¥ä½¿ç”¨ Java Vector API (JDK 16+)
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">dotProductOptimized</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #66d9ef;">double</span> sum0 = <span style="color: #ae81ff;">0</span>, sum1 = <span style="color: #ae81ff;">0</span>, sum2 = <span style="color: #ae81ff;">0</span>, sum3 = <span style="color: #ae81ff;">0</span>;  <span style="color: #75715e;">// 4è·¯å¹¶è¡Œç´¯åŠ </span>

    <span style="color: #66d9ef;">int</span> i = <span style="color: #ae81ff;">0</span>;
    <span style="color: #66d9ef;">int</span> limit = vec1.length - <span style="color: #ae81ff;">3</span>;

    <span style="color: #75715e;">// å¾ªç¯å±•å¼€ï¼Œåˆ©ç”¨ CPU æµæ°´çº¿</span>
    <span style="color: #f92672;">for</span> (; i &lt; limit; i += <span style="color: #ae81ff;">4</span>) {
        sum0 += vec1[i] * vec2[i];
        sum1 += vec1[i+<span style="color: #ae81ff;">1</span>] * vec2[i+<span style="color: #ae81ff;">1</span>];
        sum2 += vec1[i+<span style="color: #ae81ff;">2</span>] * vec2[i+<span style="color: #ae81ff;">2</span>];
        sum3 += vec1[i+<span style="color: #ae81ff;">3</span>] * vec2[i+<span style="color: #ae81ff;">3</span>];
    }

    <span style="color: #75715e;">// å¤„ç†å‰©ä½™å…ƒç´ </span>
    <span style="color: #f92672;">for</span> (; i &lt; vec1.length; i++) {
        sum0 += vec1[i] * vec2[i];
    }

    <span style="color: #f92672;">return</span> sum0 + sum1 + sum2 + sum3;
}
</pre>
            </div>
        </div>

        <!-- Section 7: ç‚¹ç§¯å€¼çƒ­åŠ›å›¾ -->
        <h2><span class="step-number">7</span>ç‚¹ç§¯çŸ©é˜µçƒ­åŠ›å›¾</h2>
        <div class="section">
            <div class="explanation">
                <strong>è¯´æ˜ï¼š</strong>è®¡ç®—æ‰€æœ‰å¥å­ä¸¤ä¸¤ä¹‹é—´çš„ç‚¹ç§¯å€¼ã€‚æ³¨æ„ç‚¹ç§¯å¯ä»¥æ˜¯è´Ÿæ•°ï¼
            </div>
            <div class="graph-container" id="heatmap"></div>
            <div class="explanation">
                <strong>çƒ­åŠ›å›¾è§£è¯»ï¼š</strong>
                <ul>
                    <li>é¢œè‰²è¶Š<span style="color: #d73027; font-weight: bold;">çº¢</span>ï¼Œç‚¹ç§¯è¶Šå¤§ï¼ˆæ–¹å‘ç›¸è¿‘ä¸”/æˆ–é•¿åº¦å¤§ï¼‰</li>
                    <li>é¢œè‰²è¶Š<span style="color: #4575b4; font-weight: bold;">è“</span>ï¼Œç‚¹ç§¯è¶Šå°æˆ–ä¸ºè´Ÿï¼ˆæ–¹å‘ç›¸åæˆ–æ­£äº¤ï¼‰</li>
                    <li>å¯¹è§’çº¿å€¼é€šå¸¸æœ€å¤§ï¼ˆè‡ªå·±ä¸è‡ªå·±çš„ç‚¹ç§¯ = ||A||Â²ï¼‰</li>
                </ul>
            </div>
        </div>

        <!-- Section 8: ç‚¹ç§¯ vs ä½™å¼¦ç›¸ä¼¼åº¦ vs æ¬§æ°è·ç¦» -->
        <h2><span class="step-number">8</span>ä¸‰ç§åº¦é‡æ–¹å¼å¯¹æ¯”</h2>
        <div class="section">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>å¯¹æ¯”ç»´åº¦</th>
                        <th>ç‚¹ç§¯ (Dot Product)</th>
                        <th>ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine)</th>
                        <th>æ¬§æ°è·ç¦» (Euclidean)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>å…¬å¼</strong></td>
                        <td>Î£(Aáµ¢ Ã— Báµ¢)</td>
                        <td>(A Â· B) / (||A|| Ã— ||B||)</td>
                        <td>âˆš(Î£(Aáµ¢ - Báµ¢)Â²)</td>
                    </tr>
                    <tr>
                        <td><strong>å€¼åŸŸ</strong></td>
                        <td class="highlight">(-âˆ, +âˆ)</td>
                        <td>[-1, 1]</td>
                        <td>[0, +âˆ)</td>
                    </tr>
                    <tr>
                        <td><strong>è€ƒè™‘å› ç´ </strong></td>
                        <td class="highlight">æ–¹å‘ + é•¿åº¦</td>
                        <td>ä»…æ–¹å‘</td>
                        <td>ç»å¯¹ä½ç½®å·®å¼‚</td>
                    </tr>
                    <tr>
                        <td><strong>è®¡ç®—å¤æ‚åº¦</strong></td>
                        <td class="highlight-green">O(n) - æœ€ç®€å•</td>
                        <td>O(n) - éœ€è¦é¢å¤–è®¡ç®—æ¨¡é•¿</td>
                        <td>O(n) - éœ€è¦å¼€æ–¹</td>
                    </tr>
                    <tr>
                        <td><strong>å½’ä¸€åŒ–å‘é‡</strong></td>
                        <td>ç‚¹ç§¯ = ä½™å¼¦ç›¸ä¼¼åº¦</td>
                        <td>ä¸ç‚¹ç§¯ç›¸åŒ</td>
                        <td>dÂ² = 2 - 2Ã—cosine</td>
                    </tr>
                    <tr>
                        <td><strong>ä¼˜ç‚¹</strong></td>
                        <td>â€¢ è®¡ç®—æœ€å¿«<br>â€¢ åŒæ—¶è€ƒè™‘æ–¹å‘å’Œé•¿åº¦<br>â€¢ é€‚åˆæ¨èç³»ç»Ÿ</td>
                        <td>â€¢ ä¸å—é•¿åº¦å½±å“<br>â€¢ å€¼åŸŸæœ‰ç•Œ<br>â€¢ é€‚åˆæ–‡æœ¬æ£€ç´¢</td>
                        <td>â€¢ ç›´è§‚æ˜“æ‡‚<br>â€¢ ç»å¯¹è·ç¦»<br>â€¢ é€‚åˆèšç±»</td>
                    </tr>
                    <tr>
                        <td><strong>ç¼ºç‚¹</strong></td>
                        <td>â€¢ å€¼åŸŸæ— ç•Œ<br>â€¢ å—é•¿åº¦å½±å“å¤§<br>â€¢ ä¸åŒé‡çº²éš¾æ¯”è¾ƒ</td>
                        <td>â€¢ å¿½ç•¥å‘é‡å¤§å°<br>â€¢ è®¡ç®—ç¨æ…¢</td>
                        <td>â€¢ å—é•¿åº¦å½±å“<br>â€¢ ç»´åº¦è¯…å’’</td>
                    </tr>
                    <tr>
                        <td><strong>ES é…ç½®</strong></td>
                        <td>similarity: "dot_product"</td>
                        <td>similarity: "cosine"</td>
                        <td>similarity: "l2_norm"</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 9: ç‚¹ç§¯çš„ç‰¹æ®Šæ€§è´¨ -->
        <h2><span class="step-number">9</span>ç‚¹ç§¯çš„é‡è¦æ€§è´¨</h2>
        <div class="section">
            <div class="graph-container" id="properties-plot"></div>

            <div class="math-box">
                <h3 style="color: #9b59b6; margin-top: 0;">å…³é”®æ€§è´¨</h3>
                <div class="formula">
                    <strong>1. è‡ªèº«ç‚¹ç§¯ = æ¨¡é•¿å¹³æ–¹</strong><br>
                    A Â· A = ||A||Â²<br><br>

                    <strong>2. äº¤æ¢å¾‹</strong><br>
                    A Â· B = B Â· A<br><br>

                    <strong>3. åˆ†é…å¾‹</strong><br>
                    A Â· (B + C) = A Â· B + A Â· C<br><br>

                    <strong>4. ä¸ä½™å¼¦ç›¸ä¼¼åº¦çš„å…³ç³»</strong><br>
                    cos(Î¸) = (A Â· B) / (||A|| Ã— ||B||)<br><br>

                    <strong>5. å½’ä¸€åŒ–å‘é‡çš„ç‰¹æ®Šæ€§</strong><br>
                    è‹¥ ||A|| = ||B|| = 1ï¼Œåˆ™ï¼š<br>
                    A Â· B = cos(Î¸) âˆˆ [-1, 1]
                </div>
            </div>
        </div>

        <!-- Section 10: ä½•æ—¶ä½¿ç”¨ç‚¹ç§¯ -->
        <h2><span class="step-number">10</span>ç‚¹ç§¯çš„åº”ç”¨åœºæ™¯</h2>
        <div class="section">
            <div class="graph-container" id="use-cases"></div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>åœºæ™¯</th>
                        <th>æ¨èåº¦é‡</th>
                        <th>åŸå› </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æ¨èç³»ç»Ÿï¼ˆç”¨æˆ·-ç‰©å“ï¼‰</td>
                        <td class="highlight">âœ… ç‚¹ç§¯</td>
                        <td>ç”¨æˆ·åå¥½å¼ºåº¦å’Œç‰©å“ç‰¹å¾å¼ºåº¦éƒ½é‡è¦</td>
                    </tr>
                    <tr>
                        <td>å½’ä¸€åŒ–åçš„è¯­ä¹‰æ£€ç´¢</td>
                        <td class="highlight">âœ… ç‚¹ç§¯</td>
                        <td>ç­‰ä»·äºä½™å¼¦ç›¸ä¼¼åº¦ï¼Œä½†è®¡ç®—æ›´å¿«</td>
                    </tr>
                    <tr>
                        <td>Maximum Inner Product Search (MIPS)</td>
                        <td class="highlight">âœ… ç‚¹ç§¯</td>
                        <td>ä¸“é—¨é’ˆå¯¹ç‚¹ç§¯ä¼˜åŒ–çš„æ£€ç´¢ç®—æ³•</td>
                    </tr>
                    <tr>
                        <td>æ³¨æ„åŠ›æœºåˆ¶ (Attention)</td>
                        <td class="highlight">âœ… ç‚¹ç§¯</td>
                        <td>Transformer ä¸­ QÂ·K ä½¿ç”¨ç‚¹ç§¯</td>
                    </tr>
                    <tr>
                        <td>æ–‡æœ¬è¯­ä¹‰æ£€ç´¢ï¼ˆæœªå½’ä¸€åŒ–ï¼‰</td>
                        <td>âœ… ä½™å¼¦ç›¸ä¼¼åº¦</td>
                        <td>æ–‡æ¡£é•¿åº¦ä¸åº”å½±å“ç›¸ä¼¼åº¦</td>
                    </tr>
                    <tr>
                        <td>èšç±»åˆ†æ</td>
                        <td>âœ… æ¬§æ°è·ç¦»</td>
                        <td>éœ€è¦ç»å¯¹è·ç¦»åº¦é‡</td>
                    </tr>
                </tbody>
            </table>

            <div class="success-box">
                <strong>ğŸ’¡ æœ€ä½³å®è·µï¼š</strong>
                <ol>
                    <li><strong>é«˜æ€§èƒ½åœºæ™¯ï¼š</strong>å…ˆå½’ä¸€åŒ–å‘é‡ï¼Œç„¶åä½¿ç”¨ç‚¹ç§¯ï¼ˆç­‰ä»·äºä½™å¼¦ï¼Œä½†æ›´å¿«ï¼‰</li>
                    <li><strong>æ¨èç³»ç»Ÿï¼š</strong>ç›´æ¥ä½¿ç”¨ç‚¹ç§¯ï¼Œå› ä¸ºå‘é‡å¤§å°æœ‰æ„ä¹‰</li>
                    <li><strong>æ–‡æœ¬æ£€ç´¢ï¼š</strong>å¦‚æœå‘é‡æœªå½’ä¸€åŒ–ï¼Œç”¨ä½™å¼¦ç›¸ä¼¼åº¦ï¼›å·²å½’ä¸€åŒ–ç”¨ç‚¹ç§¯</li>
                    <li><strong>Elasticsearchï¼š</strong>å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼Œä½¿ç”¨ <code>dot_product</code> æ¯” <code>cosine</code> æ›´å¿«</li>
                </ol>
            </div>
        </div>

        <!-- Section 11: Elasticsearch ä¸­çš„ä½¿ç”¨ -->
        <h2><span class="step-number">11</span>åœ¨ Elasticsearch ä¸­ä½¿ç”¨ç‚¹ç§¯</h2>
        <div class="section">
            <div class="warning-box">
                <strong>âš ï¸ é‡è¦æç¤ºï¼š</strong>
                åœ¨ Elasticsearch ä¸­ä½¿ç”¨ <code>dot_product</code> æ—¶ï¼Œ<strong>å¿…é¡»å…ˆå°†å‘é‡å½’ä¸€åŒ–</strong>ï¼
                å¦åˆ™ç‚¹ç§¯å€¼å¯èƒ½è¶…å‡ºé¢„æœŸèŒƒå›´ï¼Œå½±å“è¯„åˆ†ã€‚
            </div>

            <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">
<span style="color: #75715e;">// 1. åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š similarity ä¸º dot_product</span>
PUT /my_index
{
  <span style="color: #e6db74;">"mappings"</span>: {
    <span style="color: #e6db74;">"properties"</span>: {
      <span style="color: #e6db74;">"title_vector"</span>: {
        <span style="color: #e6db74;">"type"</span>: <span style="color: #e6db74;">"dense_vector"</span>,
        <span style="color: #e6db74;">"dims"</span>: <span style="color: #ae81ff;">768</span>,
        <span style="color: #e6db74;">"index"</span>: <span style="color: #ae81ff;">true</span>,
        <span style="color: #e6db74;">"similarity"</span>: <span style="color: #e6db74;">"dot_product"</span>  <span style="color: #75715e;">â† ä½¿ç”¨ç‚¹ç§¯</span>
      }
    }
  }
}

<span style="color: #75715e;">// 2. ç´¢å¼•æ–‡æ¡£æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å½’ä¸€åŒ–çš„å‘é‡ï¼</span>
POST /my_index/_doc
{
  <span style="color: #e6db74;">"title"</span>: <span style="color: #e6db74;">"Java æ•™ç¨‹"</span>,
  <span style="color: #e6db74;">"title_vector"</span>: [<span style="color: #ae81ff;">0.1</span>, <span style="color: #ae81ff;">0.2</span>, ...]  <span style="color: #75715e;">// å½’ä¸€åŒ–åçš„ 768 ç»´å‘é‡</span>
}

<span style="color: #75715e;">// 3. kNN æœç´¢</span>
POST /my_index/_search
{
  <span style="color: #e6db74;">"knn"</span>: {
    <span style="color: #e6db74;">"field"</span>: <span style="color: #e6db74;">"title_vector"</span>,
    <span style="color: #e6db74;">"query_vector"</span>: [<span style="color: #ae81ff;">0.1</span>, <span style="color: #ae81ff;">0.2</span>, ...],  <span style="color: #75715e;">// åŒæ ·éœ€è¦å½’ä¸€åŒ–ï¼</span>
    <span style="color: #e6db74;">"k"</span>: <span style="color: #ae81ff;">10</span>,
    <span style="color: #e6db74;">"num_candidates"</span>: <span style="color: #ae81ff;">100</span>
  }
}

<span style="color: #75715e;">// Elasticsearch çš„è¯„åˆ†è½¬æ¢ï¼š</span>
<span style="color: #75715e;">// å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼Œç‚¹ç§¯èŒƒå›´æ˜¯ [-1, 1]</span>
<span style="color: #75715e;">// ES å°†å…¶è½¬æ¢ä¸ºï¼šscore = (1 + dot_product) / 2</span>
<span style="color: #75715e;">// è¿™æ ·è¯„åˆ†èŒƒå›´å˜æˆ [0, 1]</span>
</pre>
            </div>

            <div class="explanation">
                <strong>æ€§èƒ½å¯¹æ¯”ï¼ˆå½’ä¸€åŒ–å‘é‡ï¼‰ï¼š</strong>
                <table class="comparison-table" style="width: 80%; margin: 20px auto;">
                    <tr>
                        <th>åº¦é‡æ–¹å¼</th>
                        <th>è®¡ç®—æ“ä½œ</th>
                        <th>ç›¸å¯¹é€Ÿåº¦</th>
                    </tr>
                    <tr>
                        <td>dot_product</td>
                        <td>n æ¬¡ä¹˜æ³• + (n-1) æ¬¡åŠ æ³•</td>
                        <td class="highlight-green">âš¡ æœ€å¿«</td>
                    </tr>
                    <tr>
                        <td>cosine</td>
                        <td>3n æ¬¡ä¹˜æ³• + 3(n-1) æ¬¡åŠ æ³• + 2 æ¬¡å¼€æ–¹ + 1 æ¬¡é™¤æ³•</td>
                        <td>ä¸­ç­‰</td>
                    </tr>
                    <tr>
                        <td>l2_norm</td>
                        <td>n æ¬¡å‡æ³• + n æ¬¡ä¹˜æ³• + (n-1) æ¬¡åŠ æ³• + 1 æ¬¡å¼€æ–¹</td>
                        <td>ä¸­ç­‰</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Section 12: æ€»ç»“ -->
        <h2><span class="step-number">12</span>æ€»ç»“ï¼šä¸‰ç§åº¦é‡çš„å…³ç³»</h2>
        <div class="section">
            <div class="graph-container" id="relationship-plot"></div>

            <div class="math-box">
                <h3 style="color: #9b59b6; margin-top: 0;">æ•°å­¦å…³ç³»æ€»ç»“</h3>
                <div class="formula">
                    <strong>å¯¹äºä»»æ„å‘é‡ï¼š</strong><br>
                    cos(Î¸) = (A Â· B) / (||A|| Ã— ||B||)<br><br>

                    <strong>å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼ˆ||A|| = ||B|| = 1ï¼‰ï¼š</strong><br>
                    A Â· B = cos(Î¸)<br>
                    dÂ²(A, B) = ||A||Â² + ||B||Â² - 2(A Â· B) = 2 - 2cos(Î¸)<br><br>

                    <strong>ç»“è®ºï¼š</strong><br>
                    å½’ä¸€åŒ–åï¼Œä¸‰ç§åº¦é‡æœ¬è´¨ä¸Šæ˜¯ç­‰ä»·çš„ï¼Œåªæ˜¯è¡¨è¾¾å½¢å¼ä¸åŒï¼<br>
                    â€¢ ç‚¹ç§¯ï¼š[-1, 1]ï¼Œè¶Šå¤§è¶Šç›¸ä¼¼<br>
                    â€¢ ä½™å¼¦ï¼š[-1, 1]ï¼Œè¶Šå¤§è¶Šç›¸ä¼¼<br>
                    â€¢ æ¬§æ°è·ç¦»ï¼š[0, âˆš2]ï¼Œè¶Šå°è¶Šç›¸ä¼¼
                </div>
            </div>

            <div class="success-box">
                <strong>ğŸ¯ æœ€ç»ˆå»ºè®®ï¼š</strong>
                <ol>
                    <li><strong>å§‹ç»ˆå¯¹å‘é‡è¿›è¡Œ L2 å½’ä¸€åŒ–</strong></li>
                    <li>å½’ä¸€åŒ–åï¼Œä¼˜å…ˆä½¿ç”¨ <code>dot_product</code>ï¼Œè®¡ç®—æœ€å¿«</li>
                    <li>å¦‚æœå‘é‡æœªå½’ä¸€åŒ–ä¸”ä¸æƒ³å½’ä¸€åŒ–ï¼Œä½¿ç”¨ <code>cosine</code></li>
                    <li>éœ€è¦ç»å¯¹è·ç¦»åº¦é‡æ—¶ï¼Œä½¿ç”¨ <code>l2_norm</code></li>
                </ol>
            </div>
        </div>

    </div>

    <script>
        // 1. 2D ç‚¹ç§¯å¯è§†åŒ–
        function plot2D() {
            const vectors = [
                { name: 'A (3, 4)', x: 3, y: 4, color: '#2ecc71' },
                { name: 'B (4, 3)', x: 4, y: 3, color: '#3498db' },
                { name: 'C (-3, 4)', x: -3, y: 4, color: '#e74c3c' }
            ];

            const traces = [];

            // ç»˜åˆ¶å‘é‡
            vectors.forEach(vec => {
                traces.push({
                    x: [0, vec.x],
                    y: [0, vec.y],
                    mode: 'lines+markers+text',
                    name: vec.name,
                    text: ['', vec.name],
                    textposition: 'top center',
                    line: { color: vec.color, width: 3 },
                    marker: { size: 10 }
                });
            });

            const layout = {
                title: '2D ç©ºé—´ä¸­çš„ç‚¹ç§¯',
                xaxis: { title: 'X', range: [-5, 6], zeroline: true },
                yaxis: { title: 'Y', range: [-1, 6], zeroline: true },
                height: 500,
                annotations: [
                    {
                        x: 3.5,
                        y: 3.5,
                        text: 'AÂ·B = 24<br>(æ–¹å‘ç›¸è¿‘)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 40,
                        ay: -40,
                        bgcolor: '#d4edda',
                        font: { color: '#27ae60' }
                    },
                    {
                        x: 0,
                        y: 4,
                        text: 'BÂ·C = 0<br>(æ­£äº¤ï¼)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -50,
                        bgcolor: '#fff3cd',
                        font: { color: '#f39c12' }
                    }
                ]
            };

            Plotly.newPlot('plot2d', traces, layout);
        }

        // 2. æŠ•å½±å¯è§†åŒ–
        function plotProjection() {
            const A = { x: 4, y: 3 };
            const B = { x: 5, y: 1 };

            // B åœ¨ A æ–¹å‘ä¸Šçš„æŠ•å½±
            const dotAB = A.x * B.x + A.y * B.y;
            const normA = Math.sqrt(A.x * A.x + A.y * A.y);
            const projLength = dotAB / normA;
            const projX = (A.x / normA) * projLength;
            const projY = (A.y / normA) * projLength;

            const traces = [
                // å‘é‡ A
                {
                    x: [0, A.x],
                    y: [0, A.y],
                    mode: 'lines+markers+text',
                    name: 'A (4, 3)',
                    text: ['', 'A'],
                    line: { color: '#2ecc71', width: 4 },
                    marker: { size: 10 }
                },
                // å‘é‡ B
                {
                    x: [0, B.x],
                    y: [0, B.y],
                    mode: 'lines+markers+text',
                    name: 'B (5, 1)',
                    text: ['', 'B'],
                    line: { color: '#3498db', width: 4 },
                    marker: { size: 10 }
                },
                // æŠ•å½±ç‚¹
                {
                    x: [projX],
                    y: [projY],
                    mode: 'markers+text',
                    name: 'æŠ•å½±ç‚¹',
                    text: ['æŠ•å½±'],
                    textposition: 'bottom center',
                    marker: { size: 12, color: '#9b59b6', symbol: 'diamond' }
                },
                // æŠ•å½±çº¿ï¼ˆä» B åˆ°æŠ•å½±ç‚¹ï¼‰
                {
                    x: [B.x, projX],
                    y: [B.y, projY],
                    mode: 'lines',
                    name: 'æŠ•å½±çº¿',
                    line: { color: '#9b59b6', width: 2, dash: 'dash' }
                },
                // ä»åŸç‚¹åˆ°æŠ•å½±ç‚¹
                {
                    x: [0, projX],
                    y: [0, projY],
                    mode: 'lines',
                    name: 'æŠ•å½±å‘é‡',
                    line: { color: '#f39c12', width: 3 }
                }
            ];

            const layout = {
                title: 'ç‚¹ç§¯çš„å‡ ä½•æ„ä¹‰ï¼šB åœ¨ A æ–¹å‘ä¸Šçš„æŠ•å½±',
                xaxis: { title: 'X', range: [-1, 6], zeroline: true },
                yaxis: { title: 'Y', range: [-1, 4], zeroline: true },
                height: 500,
                annotations: [
                    {
                        x: projX / 2,
                        y: projY / 2,
                        text: `æŠ•å½±é•¿åº¦ = ${projLength.toFixed(2)}`,
                        showarrow: false,
                        bgcolor: '#fff3cd',
                        font: { size: 12 }
                    },
                    {
                        x: 3,
                        y: 3.5,
                        text: `AÂ·B = ${dotAB}<br>= ||A|| Ã— æŠ•å½±é•¿åº¦<br>= ${normA.toFixed(2)} Ã— ${projLength.toFixed(2)}`,
                        showarrow: false,
                        bgcolor: '#f3e5f5',
                        font: { size: 12 }
                    }
                ]
            };

            Plotly.newPlot('projection-plot', traces, layout);
        }

        // 3. 3D ç‚¹ç§¯å¯è§†åŒ–
        function plot3D() {
            const vectors = [
                { name: 'A (1, 2, 3)', x: 1, y: 2, z: 3, color: '#2ecc71' },
                { name: 'B (4, 5, 6)', x: 4, y: 5, z: 6, color: '#3498db' }
            ];

            const traces = [];

            vectors.forEach(vec => {
                traces.push({
                    x: [0, vec.x],
                    y: [0, vec.y],
                    z: [0, vec.z],
                    mode: 'lines+markers+text',
                    type: 'scatter3d',
                    name: vec.name,
                    text: ['', vec.name],
                    line: { color: vec.color, width: 6 },
                    marker: { size: 8 }
                });
            });

            const layout = {
                title: '3D ç©ºé—´ç‚¹ç§¯ï¼šAÂ·B = 32',
                scene: {
                    xaxis: { title: 'X' },
                    yaxis: { title: 'Y' },
                    zaxis: { title: 'Z' }
                },
                height: 600
            };

            Plotly.newPlot('plot3d', traces, layout);
        }

        // 4. è®¡ç®—è¿‡ç¨‹è¡¨æ ¼
        function fillCalculationTable() {
            const vec1 = [0.123, -0.456, 0.789, 0.234, -0.123];
            const vec2 = [0.145, -0.423, 0.812, 0.267, -0.098];

            const tbody = document.getElementById('calculation-table');
            let sum = 0;

            for (let i = 0; i < 5; i++) {
                const product = vec1[i] * vec2[i];
                sum += product;

                const row = `
                    <tr>
                        <td>${i}</td>
                        <td>${vec1[i].toFixed(6)}</td>
                        <td>${vec2[i].toFixed(6)}</td>
                        <td>${product.toFixed(6)}</td>
                        <td>${sum.toFixed(6)}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            }

            tbody.innerHTML += `
                <tr style="background: #fffacd;">
                    <td colspan="5">... (çœç•¥åç»­ 763 ä¸ªç»´åº¦çš„è®¡ç®—) ...</td>
                </tr>
            `;

            // æ¨¡æ‹Ÿå®Œæ•´768ç»´çš„ç»“æœ
            const fullDotProduct = 245.671234;

            document.getElementById('full-calculation').innerHTML = `
                â€¢ ç´¯åŠ æ‰€æœ‰ 768 ä¸ªç»´åº¦çš„ä¹˜ç§¯<br>
                â€¢ <span class="highlight">ç‚¹ç§¯ = ${fullDotProduct.toFixed(6)}</span><br><br>

                <strong>è§£è¯»ï¼š</strong><br>
                â€¢ ç‚¹ç§¯ > 0ï¼šä¸¤ä¸ªå‘é‡æ–¹å‘ç›¸è¿‘ï¼ˆå¤¹è§’ < 90Â°ï¼‰<br>
                â€¢ ç‚¹ç§¯ = 0ï¼šä¸¤ä¸ªå‘é‡æ­£äº¤ï¼ˆå¤¹è§’ = 90Â°ï¼‰<br>
                â€¢ ç‚¹ç§¯ < 0ï¼šä¸¤ä¸ªå‘é‡æ–¹å‘ç›¸åï¼ˆå¤¹è§’ > 90Â°ï¼‰<br><br>

                <strong>ä¸ä½™å¼¦ç›¸ä¼¼åº¦çš„å…³ç³»ï¼š</strong><br>
                cosine = ${fullDotProduct.toFixed(2)} / (||A|| Ã— ||B||)
            `;
        }

        // 5. ç‚¹ç§¯çŸ©é˜µçƒ­åŠ›å›¾
        function plotHeatmap() {
            const sentences = [
                'å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹',
                'Java å…¥é—¨æ•™ç¨‹',
                'Python ç¼–ç¨‹',
                'ä»Šå¤©å¤©æ°”çœŸå¥½',
                'Elasticsearch æœç´¢'
            ];

            // ç‚¹ç§¯çŸ©é˜µï¼ˆæœªå½’ä¸€åŒ–ï¼Œå€¼å¯èƒ½è¾ƒå¤§ï¼‰
            const dotProductMatrix = [
                [156.23, 134.56, 89.34, 12.45, 98.76],
                [134.56, 148.92, 78.23, 8.67, 87.34],
                [89.34, 78.23, 142.56, 5.23, 76.89],
                [12.45, 8.67, 5.23, 138.45, 15.67],
                [98.76, 87.34, 76.89, 15.67, 145.23]
            ];

            const data = [{
                z: dotProductMatrix,
                x: sentences,
                y: sentences,
                type: 'heatmap',
                colorscale: 'RdYlBu',
                reversescale: true,
                text: dotProductMatrix.map(row => row.map(val => val.toFixed(2))),
                texttemplate: '%{text}',
                textfont: { size: 10 },
                colorbar: {
                    title: 'ç‚¹ç§¯å€¼'
                }
            }];

            const layout = {
                title: 'ç‚¹ç§¯çŸ©é˜µï¼ˆçƒ­åŠ›å›¾ï¼‰- å¯¹è§’çº¿å€¼æœ€å¤§',
                xaxis: { tickangle: -45 },
                yaxis: { tickangle: 0 },
                height: 600
            };

            Plotly.newPlot('heatmap', data, layout);
        }

        // 6. ç‚¹ç§¯æ€§è´¨å¯è§†åŒ–
        function plotProperties() {
            // å±•ç¤ºä¸åŒå¤¹è§’çš„ç‚¹ç§¯å€¼
            const angles = [];
            const dotProducts = [];
            const cosines = [];

            for (let theta = 0; theta <= 180; theta += 5) {
                angles.push(theta);
                // å‡è®¾ä¸¤ä¸ªå•ä½å‘é‡
                const cos = Math.cos(theta * Math.PI / 180);
                cosines.push(cos);
                dotProducts.push(cos); // å¯¹äºå•ä½å‘é‡ï¼Œç‚¹ç§¯ = cos
            }

            const trace1 = {
                x: angles,
                y: dotProducts,
                mode: 'lines',
                name: 'ç‚¹ç§¯ (å•ä½å‘é‡)',
                line: { color: '#9b59b6', width: 3 }
            };

            // æ ‡æ³¨å…³é”®ç‚¹
            const keyPoints = {
                x: [0, 90, 180],
                y: [1, 0, -1],
                mode: 'markers+text',
                name: 'å…³é”®ç‚¹',
                text: ['æœ€å¤§å€¼ 1<br>(æ–¹å‘ç›¸åŒ)', 'é›¶<br>(æ­£äº¤)', 'æœ€å°å€¼ -1<br>(æ–¹å‘ç›¸å)'],
                textposition: ['top center', 'top center', 'bottom center'],
                marker: { size: 12, color: '#e74c3c' }
            };

            const layout = {
                title: 'ç‚¹ç§¯éšå¤¹è§’å˜åŒ–ï¼ˆå•ä½å‘é‡ï¼‰',
                xaxis: { title: 'å¤¹è§’ Î¸ (åº¦)', range: [0, 180] },
                yaxis: { title: 'ç‚¹ç§¯å€¼', range: [-1.3, 1.3] },
                height: 500,
                shapes: [
                    { type: 'line', x0: 0, x1: 180, y0: 0, y1: 0,
                      line: { dash: 'dash', color: 'gray' } }
                ]
            };

            Plotly.newPlot('properties-plot', [trace1, keyPoints], layout);
        }

        // 7. åº”ç”¨åœºæ™¯å›¾
        function plotUseCases() {
            const data = [{
                type: 'pie',
                values: [30, 25, 20, 15, 10],
                labels: [
                    'æ¨èç³»ç»Ÿ',
                    'æ³¨æ„åŠ›æœºåˆ¶',
                    'MIPS æ£€ç´¢',
                    'å½’ä¸€åŒ–åè¯­ä¹‰æ£€ç´¢',
                    'å…¶ä»–'
                ],
                marker: {
                    colors: ['#9b59b6', '#3498db', '#2ecc71', '#f39c12', '#95a5a6']
                },
                textinfo: 'label+percent',
                hole: 0.4
            }];

            const layout = {
                title: 'ç‚¹ç§¯çš„ä¸»è¦åº”ç”¨åœºæ™¯',
                height: 500,
                annotations: [{
                    text: 'ç‚¹ç§¯',
                    x: 0.5,
                    y: 0.5,
                    font: { size: 20, color: '#9b59b6' },
                    showarrow: false
                }]
            };

            Plotly.newPlot('use-cases', data, layout);
        }

        // 8. ä¸‰ç§åº¦é‡å…³ç³»å›¾
        function plotRelationship() {
            // å±•ç¤ºå½’ä¸€åŒ–å‘é‡ä¸Šä¸‰ç§åº¦é‡çš„å…³ç³»
            const angles = [];
            const dotProducts = [];
            const euclideans = [];

            for (let theta = 0; theta <= 180; theta += 2) {
                angles.push(theta);
                const cos = Math.cos(theta * Math.PI / 180);
                dotProducts.push(cos);
                // å½’ä¸€åŒ–å‘é‡çš„æ¬§æ°è·ç¦»ï¼šd = sqrt(2 - 2cos)
                euclideans.push(Math.sqrt(2 - 2 * cos));
            }

            const traces = [
                {
                    x: angles,
                    y: dotProducts,
                    mode: 'lines',
                    name: 'ç‚¹ç§¯/ä½™å¼¦ç›¸ä¼¼åº¦',
                    line: { color: '#9b59b6', width: 3 },
                    yaxis: 'y1'
                },
                {
                    x: angles,
                    y: euclideans,
                    mode: 'lines',
                    name: 'æ¬§æ°è·ç¦»',
                    line: { color: '#e74c3c', width: 3 },
                    yaxis: 'y2'
                }
            ];

            const layout = {
                title: 'å½’ä¸€åŒ–å‘é‡ï¼šä¸‰ç§åº¦é‡çš„å…³ç³»',
                xaxis: { title: 'å¤¹è§’ Î¸ (åº¦)' },
                yaxis: {
                    title: 'ç‚¹ç§¯/ä½™å¼¦',
                    titlefont: { color: '#9b59b6' },
                    tickfont: { color: '#9b59b6' },
                    range: [-1.2, 1.2]
                },
                yaxis2: {
                    title: 'æ¬§æ°è·ç¦»',
                    titlefont: { color: '#e74c3c' },
                    tickfont: { color: '#e74c3c' },
                    overlaying: 'y',
                    side: 'right',
                    range: [0, 1.6]
                },
                height: 500,
                legend: { x: 0.7, y: 0.9 }
            };

            Plotly.newPlot('relationship-plot', traces, layout);
        }

        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        window.onload = function() {
            plot2D();
            plotProjection();
            plot3D();
            fillCalculationTable();
            plotHeatmap();
            plotProperties();
            plotUseCases();
            plotRelationship();
        };
    </script>
</body>
</html>
