<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¬§æ°è·ç¦»å¯è§†åŒ–è¯¦è§£</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 15px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            border-left: 5px solid #e74c3c;
            padding-left: 15px;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .graph-container {
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        .explanation {
            background: #ffe5e5;
            padding: 15px;
            border-left: 4px solid #e74c3c;
            margin: 15px 0;
            border-radius: 4px;
        }
        .formula {
            background: #fff3cd;
            padding: 20px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-radius: 4px;
            font-size: 16px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .comparison-table th {
            background-color: #e74c3c;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .step-number {
            display: inline-block;
            background: #e74c3c;
            color: white;
            width: 30px;
            height: 30px;
            line-height: 30px;
            border-radius: 50%;
            text-align: center;
            margin-right: 10px;
        }
        .info-box {
            background: #ffe5e5;
            border: 1px solid #ffcccc;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .success-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .math-box {
            background: white;
            border: 2px solid #e74c3c;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .vs-divider {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ æ¬§æ°è·ç¦»ï¼ˆEuclidean Distanceï¼‰å®Œæ•´å¯è§†åŒ–</h1>

        <div class="info-box">
            <strong>ğŸ“Œ å­¦ä¹ ç›®æ ‡ï¼š</strong> æ·±å…¥ç†è§£æ¬§æ°è·ç¦»çš„è®¡ç®—åŸç†ã€å‡ ä½•æ„ä¹‰ï¼Œä»¥åŠä¸ä½™å¼¦ç›¸ä¼¼åº¦çš„åŒºåˆ«ã€‚
        </div>

        <!-- Section 1: æ¬§æ°è·ç¦»çš„åŸºæœ¬æ¦‚å¿µ -->
        <h2><span class="step-number">1</span>æ¬§æ°è·ç¦»çš„åŸºæœ¬æ¦‚å¿µ</h2>
        <div class="section">
            <div class="math-box">
                <h3 style="color: #e74c3c; margin-top: 0;">æ•°å­¦å®šä¹‰</h3>
                <div class="formula">
                    <strong>å…¬å¼ï¼š</strong><br>
                    euclidean_distance(A, B) = âˆš(Î£(Aáµ¢ - Báµ¢)Â²)<br><br>

                    å±•å¼€å½¢å¼ï¼š<br>
                    d(A, B) = âˆš[(Aâ‚€-Bâ‚€)Â² + (Aâ‚-Bâ‚)Â² + (Aâ‚‚-Bâ‚‚)Â² + ... + (Aâ‚‡â‚†â‚‡-Bâ‚‡â‚†â‚‡)Â²]<br><br>

                    å¯¹äº 768 ç»´å‘é‡ï¼š<br>
                    d = âˆš[Î£áµ¢â‚Œâ‚€â·â¶â·(Aáµ¢ - Báµ¢)Â²]
                </div>
            </div>

            <div class="explanation">
                <strong>å‡ ä½•æ„ä¹‰ï¼š</strong>
                <ul>
                    <li>æ¬§æ°è·ç¦»æ˜¯å‘é‡åœ¨ç©ºé—´ä¸­çš„<span class="highlight">ç›´çº¿è·ç¦»</span></li>
                    <li>ç±»ä¼¼äºæˆ‘ä»¬åœ¨åœ°å›¾ä¸Šæµ‹é‡ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»</li>
                    <li>è·ç¦»è¶Šå°ï¼Œä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼</li>
                    <li>å€¼åŸŸï¼š[0, âˆ)ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºä¸¤ä¸ªå‘é‡å®Œå…¨ç›¸åŒ</li>
                </ul>
            </div>
        </div>

        <!-- Section 2: 2D ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦» -->
        <h2><span class="step-number">2</span>2D ç©ºé—´ç›´è§‚ç†è§£</h2>
        <div class="section">
            <div class="explanation">
                <strong>è¯´æ˜ï¼š</strong>åœ¨äºŒç»´å¹³é¢ä¸Šï¼Œæ¬§æ°è·ç¦»å°±æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»ï¼ˆå‹¾è‚¡å®šç†ï¼‰
            </div>
            <div class="graph-container" id="plot2d"></div>
            <div class="math-box">
                <h3 style="color: #e74c3c; margin-top: 0;">2D ç¤ºä¾‹è®¡ç®—</h3>
                <div class="formula">
                    ç‚¹ A = (0.8, 0.6)  "å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹"<br>
                    ç‚¹ B = (0.85, 0.53)  "Java å…¥é—¨æ•™ç¨‹"<br>
                    ç‚¹ C = (0.1, 0.99)  "ä»Šå¤©å¤©æ°”çœŸå¥½"<br><br>

                    d(A, B) = âˆš[(0.85-0.8)Â² + (0.53-0.6)Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[0.05Â² + (-0.07)Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[0.0025 + 0.0049]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš0.0074<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â‰ˆ <span class="highlight">0.086</span> (è·ç¦»è¿‘ï¼Œç›¸ä¼¼åº¦é«˜)<br><br>

                    d(A, C) = âˆš[(0.1-0.8)Â² + (0.99-0.6)Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[(-0.7)Â² + 0.39Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[0.49 + 0.1521]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš0.6421<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â‰ˆ <span class="highlight">0.801</span> (è·ç¦»è¿œï¼Œç›¸ä¼¼åº¦ä½)
                </div>
            </div>
        </div>

        <!-- Section 3: 3D ç©ºé—´å¯è§†åŒ– -->
        <h2><span class="step-number">3</span>3D ç©ºé—´æ¬§æ°è·ç¦»</h2>
        <div class="section">
            <div class="explanation">
                <strong>è¯´æ˜ï¼š</strong>åœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œæ¬§æ°è·ç¦»æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„ç©ºé—´ç›´çº¿è·ç¦»
            </div>
            <div class="graph-container" id="plot3d"></div>
            <div class="math-box">
                <h3 style="color: #e74c3c; margin-top: 0;">3D ç¤ºä¾‹è®¡ç®—</h3>
                <div class="formula">
                    ç‚¹ A = (0.8, 0.6, 0.3)<br>
                    ç‚¹ B = (0.85, 0.53, 0.35)<br><br>

                    d(A, B) = âˆš[(0.85-0.8)Â² + (0.53-0.6)Â² + (0.35-0.3)Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[0.05Â² + (-0.07)Â² + 0.05Â²]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš[0.0025 + 0.0049 + 0.0025]<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= âˆš0.0099<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â‰ˆ <span class="highlight">0.099</span>
                </div>
            </div>
        </div>

        <!-- Section 4: 768 ç»´å‘é‡çš„è¯¦ç»†è®¡ç®— -->
        <h2><span class="step-number">4</span>768 ç»´å‘é‡çš„æ¬§æ°è·ç¦»è®¡ç®—</h2>
        <div class="section">
            <div class="explanation">
                ä»¥ GTE æ¨¡å‹ç”Ÿæˆçš„ 768 ç»´å‘é‡ä¸ºä¾‹ï¼Œå±•ç¤ºå‰ 5 ä¸ªç»´åº¦çš„è®¡ç®—è¿‡ç¨‹ï¼š
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ç»´åº¦ i</th>
                        <th>vec1[i]<br>(å¥å­1)</th>
                        <th>vec2[i]<br>(å¥å­2)</th>
                        <th>å·®å€¼<br>(Aáµ¢ - Báµ¢)</th>
                        <th>å·®å€¼å¹³æ–¹<br>(Aáµ¢ - Báµ¢)Â²</th>
                    </tr>
                </thead>
                <tbody id="calculation-table">
                </tbody>
            </table>

            <div class="formula">
                <strong>å®Œæ•´è®¡ç®—ï¼ˆ768 ç»´ï¼‰ï¼š</strong><br>
                <div id="full-calculation"></div>
            </div>
        </div>

        <!-- Section 5: Java ä»£ç å®ç° -->
        <h2><span class="step-number">5</span>Java ä»£ç å®ç°</h2>
        <div class="section">
            <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">
<span style="color: #75715e;">/**
 * è®¡ç®—æ¬§æ°è·ç¦»
 *
 * @param vec1 å‘é‡1 (768ç»´)
 * @param vec2 å‘é‡2 (768ç»´)
 * @return æ¬§æ°è·ç¦»å€¼ (èŒƒå›´: [0, âˆ), 0è¡¨ç¤ºå®Œå…¨ç›¸åŒ)
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">euclideanDistance</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #f92672;">if</span> (vec1.length != vec2.length) {
        <span style="color: #f92672;">throw new</span> <span style="color: #a6e22e;">IllegalArgumentException</span>(<span style="color: #e6db74;">"å‘é‡ç»´åº¦ä¸åŒ¹é…"</span>);
    }

    <span style="color: #66d9ef;">double</span> sumSquaredDiff = <span style="color: #ae81ff;">0.0</span>;  <span style="color: #75715e;">// å·®å€¼å¹³æ–¹å’Œ</span>

    <span style="color: #75715e;">// éå†æ‰€æœ‰ç»´åº¦ï¼ˆ768ç»´ï¼‰</span>
    <span style="color: #f92672;">for</span> (<span style="color: #66d9ef;">int</span> i = <span style="color: #ae81ff;">0</span>; i &lt; vec1.length; i++) {
        <span style="color: #66d9ef;">double</span> diff = vec1[i] - vec2[i];        <span style="color: #75715e;">// è®¡ç®—å·®å€¼</span>
        sumSquaredDiff += diff * diff;           <span style="color: #75715e;">// ç´¯åŠ å·®å€¼å¹³æ–¹</span>
    }

    <span style="color: #75715e;">// è¿”å›å¹³æ–¹æ ¹</span>
    <span style="color: #f92672;">return</span> Math.<span style="color: #a6e22e;">sqrt</span>(sumSquaredDiff);
}

<span style="color: #75715e;">/**
 * å½’ä¸€åŒ–æ¬§æ°è·ç¦»ï¼ˆèŒƒå›´è½¬æ¢ä¸º [0, 1]ï¼‰
 *
 * @param vec1 å‘é‡1
 * @param vec2 å‘é‡2
 * @return å½’ä¸€åŒ–åçš„è·ç¦» (0è¡¨ç¤ºç›¸åŒ, 1è¡¨ç¤ºæœ€è¿œ)
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">normalizedEuclideanDistance</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #66d9ef;">double</span> distance = euclideanDistance(vec1, vec2);

    <span style="color: #75715e;">// å¯¹äºå•ä½å‘é‡ï¼Œæœ€å¤§è·ç¦»æ˜¯ âˆš2</span>
    <span style="color: #66d9ef;">double</span> maxDistance = Math.<span style="color: #a6e22e;">sqrt</span>(<span style="color: #ae81ff;">2.0</span>);

    <span style="color: #f92672;">return</span> distance / maxDistance;
}

<span style="color: #75715e;">/**
 * å°†æ¬§æ°è·ç¦»è½¬æ¢ä¸ºç›¸ä¼¼åº¦ (èŒƒå›´: [0, 1])
 *
 * @param vec1 å‘é‡1
 * @param vec2 å‘é‡2
 * @return ç›¸ä¼¼åº¦ (1è¡¨ç¤ºç›¸åŒ, 0è¡¨ç¤ºæœ€è¿œ)
 */</span>
<span style="color: #66d9ef;">public static double</span> <span style="color: #a6e22e;">euclideanSimilarity</span>(<span style="color: #66d9ef;">float</span>[] vec1, <span style="color: #66d9ef;">float</span>[] vec2) {
    <span style="color: #66d9ef;">double</span> distance = euclideanDistance(vec1, vec2);

    <span style="color: #75715e;">// ä½¿ç”¨å…¬å¼: similarity = 1 / (1 + distance)</span>
    <span style="color: #f92672;">return</span> <span style="color: #ae81ff;">1.0</span> / (<span style="color: #ae81ff;">1.0</span> + distance);
}
</pre>
            </div>
        </div>

        <!-- Section 6: è·ç¦»çŸ©é˜µçƒ­åŠ›å›¾ -->
        <h2><span class="step-number">6</span>è·ç¦»çŸ©é˜µçƒ­åŠ›å›¾</h2>
        <div class="section">
            <div class="explanation">
                <strong>è¯´æ˜ï¼š</strong>è®¡ç®—æ‰€æœ‰å¥å­ä¸¤ä¸¤ä¹‹é—´çš„æ¬§æ°è·ç¦»ï¼Œé¢œè‰²è¶Šæ·±è·ç¦»è¶Šå¤§ï¼ˆç›¸ä¼¼åº¦è¶Šä½ï¼‰
            </div>
            <div class="graph-container" id="heatmap"></div>
            <div class="explanation">
                <strong>çƒ­åŠ›å›¾è§£è¯»ï¼š</strong>
                <ul>
                    <li>é¢œè‰²è¶Š<span style="color: #4575b4; font-weight: bold;">è“</span>ï¼Œè·ç¦»è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜</li>
                    <li>é¢œè‰²è¶Š<span style="color: #d73027; font-weight: bold;">çº¢</span>ï¼Œè·ç¦»è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šä½</li>
                    <li>å¯¹è§’çº¿ä¸º 0.0ï¼ˆè‡ªå·±ä¸è‡ªå·±çš„è·ç¦»ä¸º0ï¼‰</li>
                </ul>
            </div>
        </div>

        <!-- Section 7: æ¬§æ°è·ç¦» vs ä½™å¼¦ç›¸ä¼¼åº¦ -->
        <div class="vs-divider">âš¡ æ¬§æ°è·ç¦» VS ä½™å¼¦ç›¸ä¼¼åº¦ âš¡</div>

        <h2><span class="step-number">7</span>æ¬§æ°è·ç¦» vs ä½™å¼¦ç›¸ä¼¼åº¦å¯¹æ¯”</h2>
        <div class="section">
            <div class="graph-container" id="comparison-plot"></div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>å¯¹æ¯”ç»´åº¦</th>
                        <th>æ¬§æ°è·ç¦» (Euclidean Distance)</th>
                        <th>ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>è®¡ç®—å…¬å¼</strong></td>
                        <td>âˆš(Î£(Aáµ¢ - Báµ¢)Â²)</td>
                        <td>(A Â· B) / (||A|| Ã— ||B||)</td>
                    </tr>
                    <tr>
                        <td><strong>å‡ ä½•æ„ä¹‰</strong></td>
                        <td>ä¸¤ç‚¹ä¹‹é—´çš„<span class="highlight">ç›´çº¿è·ç¦»</span></td>
                        <td>ä¸¤å‘é‡ä¹‹é—´çš„<span class="highlight">å¤¹è§’</span></td>
                    </tr>
                    <tr>
                        <td><strong>å€¼åŸŸ</strong></td>
                        <td>[0, âˆ)ï¼Œ0è¡¨ç¤ºç›¸åŒ</td>
                        <td>[-1, 1]ï¼Œ1è¡¨ç¤ºç›¸åŒ</td>
                    </tr>
                    <tr>
                        <td><strong>å‘é‡é•¿åº¦æ•æ„Ÿæ€§</strong></td>
                        <td>âŒ <strong>å—å‘é‡é•¿åº¦å½±å“</strong></td>
                        <td>âœ… <strong>ä¸å—å‘é‡é•¿åº¦å½±å“</strong></td>
                    </tr>
                    <tr>
                        <td><strong>è®¡ç®—å¤æ‚åº¦</strong></td>
                        <td>O(n)ï¼Œç¨å¿«</td>
                        <td>O(n)ï¼Œéœ€è¦é¢å¤–è®¡ç®—æ¨¡é•¿</td>
                    </tr>
                    <tr>
                        <td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                        <td>â€¢ å½’ä¸€åŒ–åçš„å‘é‡<br>â€¢ ç»å¯¹ä½ç½®é‡è¦çš„åœºæ™¯<br>â€¢ å›¾åƒç‰¹å¾æ¯”è¾ƒ</td>
                        <td>â€¢ æ–‡æœ¬è¯­ä¹‰æ£€ç´¢<br>â€¢ ä¸å…³å¿ƒå‘é‡é•¿åº¦<br>â€¢ åªå…³æ³¨æ–¹å‘</td>
                    </tr>
                    <tr>
                        <td><strong>ä¼˜ç‚¹</strong></td>
                        <td>â€¢ è®¡ç®—ç®€å•<br>â€¢ ç›´è§‚æ˜“æ‡‚<br>â€¢ è€ƒè™‘ç»å¯¹è·ç¦»</td>
                        <td>â€¢ ä¸å—é•¿åº¦å½±å“<br>â€¢ é€‚åˆæ–‡æœ¬æ£€ç´¢<br>â€¢ æŠ—å™ªå£°èƒ½åŠ›å¼º</td>
                    </tr>
                    <tr>
                        <td><strong>ç¼ºç‚¹</strong></td>
                        <td>â€¢ å—å‘é‡é•¿åº¦å½±å“<br>â€¢ é«˜ç»´ç©ºé—´å—ç»´åº¦è¯…å’’å½±å“</td>
                        <td>â€¢ ä¸è€ƒè™‘å‘é‡å¤§å°<br>â€¢ è®¡ç®—ç¨å¤æ‚</td>
                    </tr>
                    <tr>
                        <td><strong>Elasticsearch æ”¯æŒ</strong></td>
                        <td>âœ… l2_norm</td>
                        <td>âœ… cosine (é»˜è®¤æ¨è)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 8: å…³é”®å·®å¼‚æ¼”ç¤º -->
        <h2><span class="step-number">8</span>å…³é”®å·®å¼‚ï¼šå‘é‡é•¿åº¦çš„å½±å“</h2>
        <div class="section">
            <div class="warning-box">
                <strong>âš ï¸ é‡è¦åŒºåˆ«ï¼š</strong>æ¬§æ°è·ç¦»ä¼šå—åˆ°å‘é‡é•¿åº¦ï¼ˆæ¨¡é•¿ï¼‰çš„å½±å“ï¼Œè€Œä½™å¼¦ç›¸ä¼¼åº¦ä¸ä¼šã€‚
            </div>

            <div class="graph-container" id="length-effect"></div>

            <div class="math-box">
                <h3 style="color: #e74c3c; margin-top: 0;">ç¤ºä¾‹ï¼šå‘é‡é•¿åº¦çš„å½±å“</h3>
                <div class="formula">
                    <strong>å‡è®¾æœ‰ä¸‰ä¸ªå‘é‡ï¼š</strong><br>
                    A = (3, 4)       é•¿åº¦ ||A|| = 5<br>
                    B = (3.3, 4.4)   é•¿åº¦ ||B|| = 5.5 (ä¸Aæ–¹å‘ç›¸åŒï¼Œåªæ˜¯æ›´é•¿)<br>
                    C = (4, 3)       é•¿åº¦ ||C|| = 5 (ä¸Aæ–¹å‘ä¸åŒï¼Œä½†é•¿åº¦ç›¸åŒ)<br><br>

                    <strong style="color: #3498db;">ä½™å¼¦ç›¸ä¼¼åº¦ï¼š</strong><br>
                    cos(A, B) = 1.000 (æ–¹å‘å®Œå…¨ç›¸åŒ)<br>
                    cos(A, C) = 0.960 (æ–¹å‘ç•¥æœ‰ä¸åŒ)<br>
                    â†’ ä½™å¼¦ç›¸ä¼¼åº¦è®¤ä¸º A å’Œ B æœ€ç›¸ä¼¼<br><br>

                    <strong style="color: #e74c3c;">æ¬§æ°è·ç¦»ï¼š</strong><br>
                    d(A, B) = âˆš[(3.3-3)Â² + (4.4-4)Â²] = âˆš[0.09 + 0.16] = 0.5<br>
                    d(A, C) = âˆš[(4-3)Â² + (3-4)Â²] = âˆš[1 + 1] = 1.414<br>
                    â†’ æ¬§æ°è·ç¦»ä¹Ÿè®¤ä¸º A å’Œ B æ›´ç›¸ä¼¼<br><br>

                    <strong style="color: #9b59b6;">ä½†å¦‚æœ B å˜æˆ (6, 8)ï¼ˆæ–¹å‘ç›¸åŒä½†é•¿åº¦åŠ å€ï¼‰ï¼š</strong><br>
                    cos(A, (6,8)) = 1.000 (æ–¹å‘ä»ç„¶ç›¸åŒï¼)<br>
                    d(A, (6,8)) = âˆš[(6-3)Â² + (8-4)Â²] = âˆš[9 + 16] = 5.0 (è·ç¦»å˜å¤§ï¼)<br>
                    â†’ <span class="highlight">ä½™å¼¦ç›¸ä¼¼åº¦ä¸å˜ï¼Œä½†æ¬§æ°è·ç¦»æ˜¾è‘—å¢åŠ </span>
                </div>
            </div>
        </div>

        <!-- Section 9: å½’ä¸€åŒ–çš„é‡è¦æ€§ -->
        <h2><span class="step-number">9</span>ä¸ºä»€ä¹ˆéœ€è¦å½’ä¸€åŒ–ï¼Ÿ</h2>
        <div class="section">
            <div class="success-box">
                <strong>âœ… æœ€ä½³å®è·µï¼š</strong>åœ¨ä½¿ç”¨æ¬§æ°è·ç¦»æ—¶ï¼Œé€šå¸¸éœ€è¦å¯¹å‘é‡è¿›è¡Œå½’ä¸€åŒ–ï¼ˆL2 normalizationï¼‰
            </div>

            <div class="graph-container" id="normalization-effect"></div>

            <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">
<span style="color: #75715e;">/**
 * L2 å½’ä¸€åŒ–ï¼ˆå°†å‘é‡å½’ä¸€åŒ–ä¸ºå•ä½å‘é‡ï¼‰
 *
 * @param vec åŸå§‹å‘é‡
 * @return å½’ä¸€åŒ–åçš„å‘é‡ï¼ˆé•¿åº¦ä¸º1ï¼‰
 */</span>
<span style="color: #66d9ef;">public static float</span>[] <span style="color: #a6e22e;">normalize</span>(<span style="color: #66d9ef;">float</span>[] vec) {
    <span style="color: #75715e;">// è®¡ç®—å‘é‡çš„æ¨¡é•¿</span>
    <span style="color: #66d9ef;">double</span> norm = <span style="color: #ae81ff;">0.0</span>;
    <span style="color: #f92672;">for</span> (<span style="color: #66d9ef;">float</span> v : vec) {
        norm += v * v;
    }
    norm = Math.<span style="color: #a6e22e;">sqrt</span>(norm);

    <span style="color: #75715e;">// å½’ä¸€åŒ–</span>
    <span style="color: #66d9ef;">float</span>[] normalized = <span style="color: #f92672;">new float</span>[vec.length];
    <span style="color: #f92672;">for</span> (<span style="color: #66d9ef;">int</span> i = <span style="color: #ae81ff;">0</span>; i &lt; vec.length; i++) {
        normalized[i] = (<span style="color: #66d9ef;">float</span>) (vec[i] / norm);
    }

    <span style="color: #f92672;">return</span> normalized;
}

<span style="color: #75715e;">// ä½¿ç”¨ç¤ºä¾‹</span>
<span style="color: #66d9ef;">float</span>[] vec1 = getEmbedding(<span style="color: #e6db74;">"å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹"</span>);
<span style="color: #66d9ef;">float</span>[] vec2 = getEmbedding(<span style="color: #e6db74;">"Java å…¥é—¨æ•™ç¨‹"</span>);

<span style="color: #75715e;">// å½’ä¸€åŒ–åå†è®¡ç®—æ¬§æ°è·ç¦»</span>
<span style="color: #66d9ef;">float</span>[] norm1 = normalize(vec1);
<span style="color: #66d9ef;">float</span>[] norm2 = normalize(vec2);
<span style="color: #66d9ef;">double</span> distance = euclideanDistance(norm1, norm2);
</pre>
            </div>

            <div class="explanation">
                <strong>å½’ä¸€åŒ–åçš„æ•ˆæœï¼š</strong>
                <ul>
                    <li>æ‰€æœ‰å‘é‡é•¿åº¦å˜ä¸º 1ï¼ˆå•ä½å‘é‡ï¼‰</li>
                    <li>æ¬§æ°è·ç¦»åªåæ˜ æ–¹å‘å·®å¼‚ï¼Œä¸å—é•¿åº¦å½±å“</li>
                    <li>å½’ä¸€åŒ–åçš„æ¬§æ°è·ç¦»ä¸ä½™å¼¦ç›¸ä¼¼åº¦æœ‰æ•°å­¦å…³ç³»ï¼š<br>
                        <code>dÂ²(A, B) = 2 - 2Ã—cos(A, B)</code>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Section 10: Elasticsearch ä¸­çš„ä½¿ç”¨ -->
        <h2><span class="step-number">10</span>åœ¨ Elasticsearch ä¸­ä½¿ç”¨æ¬§æ°è·ç¦»</h2>
        <div class="section">
            <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">
<span style="color: #75715e;">// 1. åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š similarity ä¸º l2_norm</span>
PUT /my_index
{
  <span style="color: #e6db74;">"mappings"</span>: {
    <span style="color: #e6db74;">"properties"</span>: {
      <span style="color: #e6db74;">"title_vector"</span>: {
        <span style="color: #e6db74;">"type"</span>: <span style="color: #e6db74;">"dense_vector"</span>,
        <span style="color: #e6db74;">"dims"</span>: <span style="color: #ae81ff;">768</span>,
        <span style="color: #e6db74;">"index"</span>: <span style="color: #ae81ff;">true</span>,
        <span style="color: #e6db74;">"similarity"</span>: <span style="color: #e6db74;">"l2_norm"</span>  <span style="color: #75715e;">â† ä½¿ç”¨æ¬§æ°è·ç¦»</span>
      }
    }
  }
}

<span style="color: #75715e;">// 2. kNN æœç´¢ï¼ˆä¼šè‡ªåŠ¨ä½¿ç”¨ l2_norm è®¡ç®—è·ç¦»ï¼‰</span>
POST /my_index/_search
{
  <span style="color: #e6db74;">"knn"</span>: {
    <span style="color: #e6db74;">"field"</span>: <span style="color: #e6db74;">"title_vector"</span>,
    <span style="color: #e6db74;">"query_vector"</span>: [<span style="color: #ae81ff;">0.1</span>, <span style="color: #ae81ff;">0.2</span>, ...],  <span style="color: #75715e;">// 768ç»´å‘é‡</span>
    <span style="color: #e6db74;">"k"</span>: <span style="color: #ae81ff;">10</span>,
    <span style="color: #e6db74;">"num_candidates"</span>: <span style="color: #ae81ff;">100</span>
  }
}

<span style="color: #75715e;">// è¿”å›çš„ _score æ˜¯åŸºäºæ¬§æ°è·ç¦»è®¡ç®—çš„ç›¸ä¼¼åº¦åˆ†æ•°</span>
<span style="color: #75715e;">// åˆ†æ•°è¶Šé«˜ï¼Œè·ç¦»è¶Šå°ï¼ˆè¶Šç›¸ä¼¼ï¼‰</span>
</pre>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ æ³¨æ„ï¼š</strong>
                <ul>
                    <li>Elasticsearch ä¼šè‡ªåŠ¨å°†æ¬§æ°è·ç¦»è½¬æ¢ä¸ºè¯„åˆ†ï¼ˆscoreï¼‰</li>
                    <li>è¯„åˆ†å…¬å¼ï¼š<code>score = 1 / (1 + distanceÂ²)</code></li>
                    <li>å¯¹äºå¤§å¤šæ•°æ–‡æœ¬è¯­ä¹‰æ£€ç´¢ï¼Œæ¨èä½¿ç”¨ <code>cosine</code> è€Œä¸æ˜¯ <code>l2_norm</code></li>
                </ul>
            </div>
        </div>

        <!-- Section 11: ä½¿ç”¨å»ºè®® -->
        <h2><span class="step-number">11</span>ä½•æ—¶ä½¿ç”¨æ¬§æ°è·ç¦»ï¼Ÿ</h2>
        <div class="section">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>åœºæ™¯</th>
                        <th>æ¨èåº¦é‡</th>
                        <th>åŸå› </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æ–‡æœ¬è¯­ä¹‰æ£€ç´¢</td>
                        <td><span style="color: #3498db;">âœ… ä½™å¼¦ç›¸ä¼¼åº¦</span></td>
                        <td>ä¸å—æ–‡æœ¬é•¿åº¦å½±å“ï¼Œåªå…³æ³¨è¯­ä¹‰æ–¹å‘</td>
                    </tr>
                    <tr>
                        <td>å›¾åƒç‰¹å¾åŒ¹é…</td>
                        <td><span style="color: #e74c3c;">âœ… æ¬§æ°è·ç¦»</span></td>
                        <td>å½’ä¸€åŒ–åçš„å›¾åƒç‰¹å¾ï¼Œç»å¯¹è·ç¦»æœ‰æ„ä¹‰</td>
                    </tr>
                    <tr>
                        <td>æ¨èç³»ç»Ÿ</td>
                        <td><span style="color: #3498db;">âœ… ä½™å¼¦ç›¸ä¼¼åº¦</span></td>
                        <td>ç”¨æˆ·åå¥½å‘é‡ï¼Œå…³æ³¨åå¥½æ–¹å‘è€Œéå¼ºåº¦</td>
                    </tr>
                    <tr>
                        <td>èšç±»åˆ†æ</td>
                        <td><span style="color: #e74c3c;">âœ… æ¬§æ°è·ç¦»</span></td>
                        <td>å½’ä¸€åŒ–åï¼Œå¯ä»¥å½¢æˆçƒå½¢èšç±»</td>
                    </tr>
                    <tr>
                        <td>å¼‚å¸¸æ£€æµ‹</td>
                        <td><span style="color: #e74c3c;">âœ… æ¬§æ°è·ç¦»</span></td>
                        <td>ç»å¯¹è·ç¦»æ›´èƒ½åæ˜ å¼‚å¸¸ç¨‹åº¦</td>
                    </tr>
                    <tr>
                        <td>æ—¶é—´åºåˆ—</td>
                        <td><span style="color: #e74c3c;">âœ… æ¬§æ°è·ç¦»</span></td>
                        <td>DTW æˆ–æ¬§æ°è·ç¦»æµ‹é‡åºåˆ—å·®å¼‚</td>
                    </tr>
                </tbody>
            </table>

            <div class="success-box">
                <strong>ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“ï¼š</strong>
                <ol>
                    <li><strong>æ–‡æœ¬æ£€ç´¢ï¼š</strong>ä¼˜å…ˆä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦</li>
                    <li><strong>ä½¿ç”¨æ¬§æ°è·ç¦»å‰ï¼š</strong>åŠ¡å¿…å¯¹å‘é‡è¿›è¡Œ L2 å½’ä¸€åŒ–</li>
                    <li><strong>å½’ä¸€åŒ–åï¼š</strong>æ¬§æ°è·ç¦»å’Œä½™å¼¦ç›¸ä¼¼åº¦ç­‰ä»·</li>
                    <li><strong>Elasticsearchï¼š</strong>é»˜è®¤ä½¿ç”¨ <code>cosine</code>ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚</li>
                </ol>
            </div>
        </div>

    </div>

    <script>
        // 1. 2D æ¬§æ°è·ç¦»å¯è§†åŒ–
        function plot2D() {
            const points = {
                'å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹': { x: 0.8, y: 0.6, color: '#2ecc71' },
                'Java å…¥é—¨æ•™ç¨‹': { x: 0.85, y: 0.53, color: '#3498db' },
                'ä»Šå¤©å¤©æ°”çœŸå¥½': { x: 0.1, y: 0.99, color: '#e74c3c' }
            };

            const traces = [];

            // ç»˜åˆ¶ç‚¹
            for (const [name, point] of Object.entries(points)) {
                traces.push({
                    x: [point.x],
                    y: [point.y],
                    mode: 'markers+text',
                    name: name,
                    text: [name],
                    textposition: 'top center',
                    marker: { size: 12, color: point.color }
                });
            }

            // ç»˜åˆ¶è·ç¦»çº¿
            const p1 = points['å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹'];
            const p2 = points['Java å…¥é—¨æ•™ç¨‹'];
            const p3 = points['ä»Šå¤©å¤©æ°”çœŸå¥½'];

            // è¿‘è·ç¦»çº¿ï¼ˆç»¿è‰²-è“è‰²ï¼‰
            traces.push({
                x: [p1.x, p2.x],
                y: [p1.y, p2.y],
                mode: 'lines',
                name: 'd(A,B) = 0.086',
                line: { color: '#27ae60', width: 3, dash: 'dash' },
                showlegend: true
            });

            // è¿œè·ç¦»çº¿ï¼ˆç»¿è‰²-çº¢è‰²ï¼‰
            traces.push({
                x: [p1.x, p3.x],
                y: [p1.y, p3.y],
                mode: 'lines',
                name: 'd(A,C) = 0.801',
                line: { color: '#c0392b', width: 3, dash: 'dash' },
                showlegend: true
            });

            const layout = {
                title: '2D ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»ï¼ˆç›´çº¿è·ç¦»ï¼‰',
                xaxis: { title: 'X è½´', range: [-0.1, 1.1], zeroline: true },
                yaxis: { title: 'Y è½´', range: [-0.1, 1.1], zeroline: true },
                height: 500,
                annotations: [
                    {
                        x: (p1.x + p2.x) / 2,
                        y: (p1.y + p2.y) / 2,
                        text: 'çŸ­è·ç¦»<br>(ç›¸ä¼¼)',
                        showarrow: false,
                        font: { color: '#27ae60', size: 12 }
                    },
                    {
                        x: (p1.x + p3.x) / 2,
                        y: (p1.y + p3.y) / 2,
                        text: 'é•¿è·ç¦»<br>(ä¸ç›¸ä¼¼)',
                        showarrow: false,
                        font: { color: '#c0392b', size: 12 }
                    }
                ]
            };

            Plotly.newPlot('plot2d', traces, layout);
        }

        // 2. 3D æ¬§æ°è·ç¦»å¯è§†åŒ–
        function plot3D() {
            const points = {
                'å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹': { x: 0.8, y: 0.6, z: 0.3, color: '#2ecc71' },
                'Java å…¥é—¨æ•™ç¨‹': { x: 0.85, y: 0.53, z: 0.35, color: '#3498db' },
                'ä»Šå¤©å¤©æ°”çœŸå¥½': { x: 0.1, y: 0.99, z: -0.2, color: '#e74c3c' }
            };

            const traces = [];

            // ç»˜åˆ¶ç‚¹
            for (const [name, point] of Object.entries(points)) {
                traces.push({
                    x: [point.x],
                    y: [point.y],
                    z: [point.z],
                    mode: 'markers+text',
                    type: 'scatter3d',
                    name: name,
                    text: [name],
                    textposition: 'top center',
                    marker: { size: 8, color: point.color }
                });
            }

            // ç»˜åˆ¶è·ç¦»çº¿
            const p1 = points['å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹'];
            const p2 = points['Java å…¥é—¨æ•™ç¨‹'];

            traces.push({
                x: [p1.x, p2.x],
                y: [p1.y, p2.y],
                z: [p1.z, p2.z],
                mode: 'lines',
                type: 'scatter3d',
                name: 'æ¬§æ°è·ç¦»',
                line: { color: '#27ae60', width: 6 }
            });

            const layout = {
                title: '3D ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»',
                scene: {
                    xaxis: { title: 'X' },
                    yaxis: { title: 'Y' },
                    zaxis: { title: 'Z' }
                },
                height: 600
            };

            Plotly.newPlot('plot3d', traces, layout);
        }

        // 3. è®¡ç®—è¿‡ç¨‹è¡¨æ ¼
        function fillCalculationTable() {
            const vec1 = [0.123, -0.456, 0.789, 0.234, -0.123];
            const vec2 = [0.145, -0.423, 0.812, 0.267, -0.098];

            const tbody = document.getElementById('calculation-table');
            let sumSquaredDiff = 0;

            for (let i = 0; i < 5; i++) {
                const diff = vec1[i] - vec2[i];
                const squaredDiff = diff * diff;
                sumSquaredDiff += squaredDiff;

                const row = `
                    <tr>
                        <td>${i}</td>
                        <td>${vec1[i].toFixed(6)}</td>
                        <td>${vec2[i].toFixed(6)}</td>
                        <td>${diff.toFixed(6)}</td>
                        <td>${squaredDiff.toFixed(6)}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            }

            tbody.innerHTML += `
                <tr style="background: #fffacd;">
                    <td colspan="5">... (çœç•¥åç»­ 763 ä¸ªç»´åº¦çš„è®¡ç®—) ...</td>
                </tr>
            `;

            // æ¨¡æ‹Ÿå®Œæ•´768ç»´çš„ç»“æœ
            const fullSumSquaredDiff = 12.345678;
            const distance = Math.sqrt(fullSumSquaredDiff);

            document.getElementById('full-calculation').innerHTML = `
                â€¢ å·®å€¼å¹³æ–¹å’Œ Î£(Aáµ¢ - Báµ¢)Â² = ${fullSumSquaredDiff.toFixed(6)}<br>
                â€¢ <span class="highlight">æ¬§æ°è·ç¦» = âˆš${fullSumSquaredDiff.toFixed(6)} = ${distance.toFixed(6)}</span><br><br>

                <strong>è§£è¯»ï¼š</strong><br>
                â€¢ è·ç¦»è¶Šå°ï¼Œä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼<br>
                â€¢ è·ç¦»ä¸º 0 æ—¶ï¼Œä¸¤ä¸ªå‘é‡å®Œå…¨ç›¸åŒ<br>
                â€¢ å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼Œæœ€å¤§è·ç¦»çº¦ä¸º âˆš2 â‰ˆ 1.414
            `;
        }

        // 4. è·ç¦»çŸ©é˜µçƒ­åŠ›å›¾
        function plotHeatmap() {
            const sentences = [
                'å¦‚ä½•å­¦ä¹  Java ç¼–ç¨‹',
                'Java å…¥é—¨æ•™ç¨‹',
                'Python ç¼–ç¨‹',
                'ä»Šå¤©å¤©æ°”çœŸå¥½',
                'Elasticsearch æœç´¢'
            ];

            // æ¬§æ°è·ç¦»çŸ©é˜µï¼ˆè·ç¦»è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šä½ï¼‰
            const distanceMatrix = [
                [0.000, 0.234, 0.678, 1.234, 0.543],
                [0.234, 0.000, 0.712, 1.298, 0.598],
                [0.678, 0.712, 0.000, 1.345, 0.789],
                [1.234, 1.298, 1.345, 0.000, 1.156],
                [0.543, 0.598, 0.789, 1.156, 0.000]
            ];

            const data = [{
                z: distanceMatrix,
                x: sentences,
                y: sentences,
                type: 'heatmap',
                colorscale: 'Blues',
                reversescale: true,
                text: distanceMatrix.map(row => row.map(val => val.toFixed(3))),
                texttemplate: '%{text}',
                textfont: { size: 12 },
                colorbar: {
                    title: 'è·ç¦»',
                    tickvals: [0, 0.5, 1.0, 1.5]
                }
            }];

            const layout = {
                title: 'æ¬§æ°è·ç¦»çŸ©é˜µï¼ˆçƒ­åŠ›å›¾ï¼‰',
                xaxis: { tickangle: -45 },
                yaxis: { tickangle: 0 },
                height: 600,
                annotations: [{
                    text: 'æ³¨ï¼šè“è‰²=è·ç¦»å°(ç›¸ä¼¼), çº¢è‰²=è·ç¦»å¤§(ä¸ç›¸ä¼¼)',
                    showarrow: false,
                    x: 0.5,
                    y: -0.15,
                    xref: 'paper',
                    yref: 'paper',
                    font: { size: 12, color: '#e74c3c' }
                }]
            };

            Plotly.newPlot('heatmap', data, layout);
        }

        // 5. æ¬§æ°è·ç¦» vs ä½™å¼¦ç›¸ä¼¼åº¦å¯¹æ¯”
        function plotComparison() {
            // åŒä¸€æ–¹å‘ï¼Œä¸åŒé•¿åº¦çš„å‘é‡
            const vectors = [
                { name: 'A (1, 1)', x: 1, y: 1, length: Math.sqrt(2) },
                { name: 'B (2, 2)', x: 2, y: 2, length: Math.sqrt(8) },
                { name: 'C (3, 3)', x: 3, y: 3, length: Math.sqrt(18) },
                { name: 'D (1.5, 0.5)', x: 1.5, y: 0.5, length: Math.sqrt(2.5) }
            ];

            const traces = [];

            // ç»˜åˆ¶å‘é‡
            vectors.forEach((vec, idx) => {
                traces.push({
                    x: [0, vec.x],
                    y: [0, vec.y],
                    mode: 'lines+markers+text',
                    name: vec.name,
                    text: ['', vec.name],
                    textposition: 'top center',
                    line: { width: 3 },
                    marker: { size: 10 }
                });
            });

            const layout = {
                title: 'æ¬§æ°è·ç¦» vs ä½™å¼¦ç›¸ä¼¼åº¦ï¼šå‘é‡é•¿åº¦çš„å½±å“',
                xaxis: { title: 'X', range: [-0.5, 3.5], zeroline: true },
                yaxis: { title: 'Y', range: [-0.5, 3.5], zeroline: true },
                height: 500,
                annotations: [
                    {
                        x: 2,
                        y: 2.5,
                        text: 'A, B, C æ–¹å‘ç›¸åŒ<br>ä½™å¼¦ç›¸ä¼¼åº¦ = 1.0<br>ä½†æ¬§æ°è·ç¦»ä¸åŒï¼',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -80,
                        ay: -50,
                        bgcolor: '#fffacd',
                        bordercolor: '#ffc107',
                        borderwidth: 2
                    },
                    {
                        x: 1.5,
                        y: 0.5,
                        text: 'D æ–¹å‘ä¸åŒ<br>ä½™å¼¦ç›¸ä¼¼åº¦ < 1.0<br>æ¬§æ°è·ç¦»ä¹Ÿä¸åŒ',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 50,
                        ay: 50,
                        bgcolor: '#ffe5e5',
                        bordercolor: '#e74c3c',
                        borderwidth: 2
                    }
                ]
            };

            Plotly.newPlot('comparison-plot', traces, layout);
        }

        // 6. å‘é‡é•¿åº¦å½±å“æ¼”ç¤º
        function plotLengthEffect() {
            const baseVector = { x: 1, y: 1 };
            const scales = [0.5, 1, 1.5, 2, 2.5, 3];

            const traces = [];

            scales.forEach(scale => {
                traces.push({
                    x: [0, baseVector.x * scale],
                    y: [0, baseVector.y * scale],
                    mode: 'lines+markers',
                    name: `é•¿åº¦ Ã— ${scale}`,
                    line: { width: 3 },
                    marker: { size: 8 }
                });
            });

            const layout = {
                title: 'ç›¸åŒæ–¹å‘ã€ä¸åŒé•¿åº¦çš„å‘é‡',
                xaxis: { title: 'X', range: [-0.5, 3.5], zeroline: true },
                yaxis: { title: 'Y', range: [-0.5, 3.5], zeroline: true },
                height: 500,
                annotations: [{
                    text: 'æ‰€æœ‰å‘é‡æ–¹å‘ç›¸åŒ (45Â°)<br>ä½™å¼¦ç›¸ä¼¼åº¦éƒ½æ˜¯ 1.0<br>ä½†æ¬§æ°è·ç¦»å„ä¸ç›¸åŒ',
                    x: 2,
                    y: 2.5,
                    showarrow: false,
                    bgcolor: '#d4edda',
                    bordercolor: '#28a745',
                    borderwidth: 2,
                    font: { size: 14 }
                }]
            };

            Plotly.newPlot('length-effect', traces, layout);
        }

        // 7. å½’ä¸€åŒ–æ•ˆæœ
        function plotNormalizationEffect() {
            // åŸå§‹å‘é‡
            const original = [
                { name: 'A åŸå§‹', x: 3, y: 4, normalized: false },
                { name: 'B åŸå§‹', x: 6, y: 8, normalized: false }
            ];

            // å½’ä¸€åŒ–åçš„å‘é‡
            const normalized = [
                { name: 'A å½’ä¸€åŒ–', x: 0.6, y: 0.8, normalized: true },
                { name: 'B å½’ä¸€åŒ–', x: 0.6, y: 0.8, normalized: true }
            ];

            const traces = [];

            // åŸå§‹å‘é‡
            original.forEach(vec => {
                traces.push({
                    x: [0, vec.x],
                    y: [0, vec.y],
                    mode: 'lines+markers+text',
                    name: vec.name,
                    text: ['', vec.name],
                    textposition: 'top center',
                    line: { width: 3, dash: 'dash' },
                    marker: { size: 10 }
                });
            });

            // å½’ä¸€åŒ–å‘é‡
            normalized.forEach(vec => {
                traces.push({
                    x: [0, vec.x],
                    y: [0, vec.y],
                    mode: 'lines+markers+text',
                    name: vec.name,
                    text: ['', vec.name],
                    textposition: 'bottom center',
                    line: { width: 4 },
                    marker: { size: 12 }
                });
            });

            // å•ä½åœ†
            const theta = [];
            const circleX = [];
            const circleY = [];
            for (let i = 0; i <= 100; i++) {
                const angle = (i / 100) * 2 * Math.PI;
                theta.push(angle);
                circleX.push(Math.cos(angle));
                circleY.push(Math.sin(angle));
            }

            traces.push({
                x: circleX,
                y: circleY,
                mode: 'lines',
                name: 'å•ä½åœ†',
                line: { color: 'gray', dash: 'dot', width: 1 },
                showlegend: true
            });

            const layout = {
                title: 'L2 å½’ä¸€åŒ–çš„æ•ˆæœ',
                xaxis: { title: 'X', range: [-1, 7], zeroline: true },
                yaxis: { title: 'Y', range: [-1, 9], zeroline: true },
                height: 600,
                annotations: [
                    {
                        x: 4.5,
                        y: 6,
                        text: 'åŸå§‹å‘é‡ï¼š<br>d(A, B) = 5.0<br>(è·ç¦»å¾ˆå¤§)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -50,
                        ay: -50,
                        bgcolor: '#ffe5e5',
                        bordercolor: '#e74c3c',
                        borderwidth: 2
                    },
                    {
                        x: 0.6,
                        y: 0.8,
                        text: 'å½’ä¸€åŒ–åï¼š<br>d(A, B) = 0.0<br>(å®Œå…¨é‡åˆ)',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 80,
                        ay: -50,
                        bgcolor: '#d4edda',
                        bordercolor: '#28a745',
                        borderwidth: 2
                    }
                ]
            };

            Plotly.newPlot('normalization-effect', traces, layout);
        }

        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        window.onload = function() {
            plot2D();
            plot3D();
            fillCalculationTable();
            plotHeatmap();
            plotComparison();
            plotLengthEffect();
            plotNormalizationEffect();
        };
    </script>
</body>
</html>
